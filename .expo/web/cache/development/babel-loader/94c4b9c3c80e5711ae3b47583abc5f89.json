{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { TextInput, TouchableOpacity } from \"react-native-gesture-handler\";\nimport { DEVICE_WIDTH, MARGIN_VIEW, PADDING_CONTENT, TEXTSIZE } from \"../constant/Constant\";\nimport global from \"../global\";\nimport signIn from \"../api/signIn\";\nimport saveToken from \"../api/saveToken\";\nimport getToken from \"../api/getToken\";\nimport initData from \"../api/initDataCourses\";\nimport getUserLogged from \"../api/getUserLogged\";\n\nvar Login = function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      email: '',\n      password: ''\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getToken().then(function (token) {\n        return getUserLogged(token);\n      }).then(function (res) {\n        return _this2.redirectToMain(res);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"redirectToMain\",\n    value: function redirectToMain(res) {\n      if (res.email) {\n        global.onSignIn = res;\n        this.props.navigation.navigate(\"Home\");\n      }\n    }\n  }, {\n    key: \"gotoMain\",\n    value: function gotoMain() {\n      this.props.navigation.navigate(\"Home\");\n    }\n  }, {\n    key: \"gotoRegister\",\n    value: function gotoRegister() {\n      this.props.navigation.navigate(\"Register\");\n    }\n  }, {\n    key: \"onSuccess\",\n    value: function onSuccess() {\n      Alert.alert('Thông báo', 'Đăng nhập thành công', [{\n        text: 'OK'\n      }], {\n        cancelable: false\n      });\n    }\n  }, {\n    key: \"onFail\",\n    value: function onFail() {\n      Alert.alert('Alert Title', 'My Alert Msg', [{\n        text: 'Cancel',\n        onPress: function onPress() {\n          return console.log('Cancel Pressed');\n        },\n        style: 'cancel'\n      }, {\n        text: 'OK',\n        onPress: function onPress() {\n          return console.log('OK Pressed');\n        }\n      }]);\n    }\n  }, {\n    key: \"onSignIn\",\n    value: function onSignIn() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          email = _this$state.email,\n          password = _this$state.password;\n      signIn(email, password).then(function (res) {\n        if (res.user) {\n          global.onSignIn = res.user;\n          saveToken(res.access_token);\n\n          _this3.onSuccess();\n\n          _this3.gotoMain();\n        } else {\n          console.log(res);\n\n          _this3.onFail();\n        }\n      }).catch(function (err) {\n        console.log(err);\n\n        _this3.onFail();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state2 = this.state,\n          email = _this$state2.email,\n          password = _this$state2.password;\n      return React.createElement(View, {\n        styles: styles.container\n      }, React.createElement(View, {\n        style: styles.rect\n      }, React.createElement(TextInput, {\n        placeholder: \"Email\",\n        textBreakStrategy: \"highQuality\",\n        keyboardType: \"email-address\",\n        style: styles.textInput,\n        onChangeText: function onChangeText(text) {\n          return _this4.setState({\n            email: text\n          });\n        },\n        color: \"#000\"\n      })), React.createElement(View, {\n        style: styles.rect\n      }, React.createElement(TextInput, {\n        placeholder: \"Password\",\n        secureTextEntry: true,\n        style: styles.textInput,\n        onChangeText: function onChangeText(text) {\n          return _this4.setState({\n            password: text\n          });\n        },\n        color: \"#000\"\n      })), React.createElement(TouchableOpacity, {\n        onPress: this.onSignIn.bind(this),\n        style: styles.button\n      }, React.createElement(Text, {\n        style: styles.textButton\n      }, \"LOGIN\")), React.createElement(TouchableOpacity, {\n        onPress: this.gotoRegister.bind(this),\n        style: styles.button\n      }, React.createElement(Text, {\n        style: styles.textButton\n      }, \"REGISTER\")));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: \"row\",\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  rect: {\n    width: DEVICE_WIDTH - 40,\n    height: 48,\n    borderWidth: 1,\n    borderColor: \"#000\",\n    borderRadius: 15,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginTop: MARGIN_VIEW,\n    marginLeft: MARGIN_VIEW,\n    marginRight: MARGIN_VIEW,\n    padding: PADDING_CONTENT\n  },\n  textInput: {\n    color: \"#000\",\n    width: DEVICE_WIDTH - 40,\n    height: 48,\n    fontSize: TEXTSIZE\n  },\n  textButton: {\n    color: \"#000\",\n    fontSize: TEXTSIZE\n  },\n  button: {\n    width: DEVICE_WIDTH - 40,\n    height: 48,\n    borderWidth: 1,\n    borderColor: \"rgba(255,255,255,1)\",\n    borderRadius: 15,\n    backgroundColor: \"#ffd11a\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    alignContent: \"center\",\n    marginTop: MARGIN_VIEW,\n    marginLeft: MARGIN_VIEW,\n    marginRight: MARGIN_VIEW,\n    padding: PADDING_CONTENT\n  }\n});","map":{"version":3,"sources":["D:/Work_Learn/react-native/learningapp2/src/screens/Login.js"],"names":["React","Component","TextInput","TouchableOpacity","DEVICE_WIDTH","MARGIN_VIEW","PADDING_CONTENT","TEXTSIZE","global","signIn","saveToken","getToken","initData","getUserLogged","Login","props","state","email","password","then","token","res","redirectToMain","catch","err","console","log","onSignIn","navigation","navigate","Alert","alert","text","cancelable","onPress","style","user","access_token","onSuccess","gotoMain","onFail","styles","container","rect","textInput","setState","bind","button","textButton","gotoRegister","StyleSheet","create","flex","flexDirection","backgroundColor","alignItems","justifyContent","width","height","borderWidth","borderColor","borderRadius","marginTop","marginLeft","marginRight","padding","color","fontSize","alignContent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n    StyleSheet,\r\n    Text,\r\n    View,\r\n    Alert\r\n} from \"react-native\";\r\nimport { TextInput, TouchableOpacity } from \"react-native-gesture-handler\";\r\nimport { DEVICE_WIDTH, MARGIN_VIEW, PADDING_CONTENT, TEXTSIZE } from '../constant/Constant';\r\nimport global from '../global';\r\nimport signIn from '../api/signIn';\r\nimport saveToken from '../api/saveToken';\r\nimport getToken from '../api/getToken';\r\nimport initData from \"../api/initDataCourses\";\r\nimport getUserLogged from \"../api/getUserLogged\";\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        getToken()\r\n        .then(token => getUserLogged(token))\r\n        .then(res => this.redirectToMain(res))\r\n        .catch(err => console.log(err));\r\n    }\r\n\r\n    redirectToMain(res) {\r\n        if(res.email) {\r\n            global.onSignIn = res;\r\n            this.props.navigation.navigate(\"Home\")\r\n        }\r\n    }\r\n\r\n    gotoMain() {\r\n        this.props.navigation.navigate(\"Home\")\r\n    }\r\n\r\n    gotoRegister() {\r\n        this.props.navigation.navigate(\"Register\")\r\n    }\r\n\r\n    onSuccess() {\r\n        Alert.alert(\r\n            'Thông báo',\r\n            'Đăng nhập thành công',\r\n            [\r\n                { text: 'OK' }\r\n            ],\r\n            { cancelable: false }\r\n        );\r\n      }\r\n    \r\n    onFail() {\r\n        Alert.alert('Alert Title', 'My Alert Msg', [\r\n            {\r\n              text: 'Cancel',\r\n              onPress: () => console.log('Cancel Pressed'),\r\n              style: 'cancel',\r\n            },\r\n            { text: 'OK', onPress: () => console.log('OK Pressed') },\r\n        ]);\r\n    }\r\n\r\n    onSignIn() {\r\n        const { email, password } = this.state;\r\n        signIn(email, password)\r\n          .then(res => {\r\n            if(res.user) {\r\n              global.onSignIn = res.user;\r\n              saveToken(res.access_token);\r\n              this.onSuccess();\r\n              this.gotoMain();\r\n            } else {\r\n              console.log(res)\r\n              this.onFail();\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n            this.onFail();\r\n          });\r\n    }\r\n\r\n    render() {\r\n        const { email, password } = this.state;\r\n        return (\r\n            <View styles={ styles.container }>\r\n                <View style = { styles.rect }>\r\n                    <TextInput\r\n                        placeholder=\"Email\"\r\n                        textBreakStrategy=\"highQuality\"\r\n                        keyboardType=\"email-address\"\r\n                        style={ styles.textInput }\r\n                        onChangeText={text => this.setState({email: text})}\r\n                        color=\"#000\"\r\n                    ></TextInput>\r\n                </View>\r\n                <View style={ styles.rect }>\r\n                <TextInput\r\n                        placeholder=\"Password\"\r\n                        secureTextEntry={true}\r\n                        style={ styles.textInput }\r\n                        onChangeText={text => this.setState({password: text})}\r\n                        color=\"#000\"\r\n                    ></TextInput>\r\n                </View>\r\n\r\n                <TouchableOpacity\r\n                    onPress={this.onSignIn.bind(this)}\r\n                    style={ styles.button }\r\n                >\r\n                    <Text style={ styles.textButton }>LOGIN</Text>\r\n                </TouchableOpacity>\r\n\r\n                <TouchableOpacity\r\n                    onPress={this.gotoRegister.bind(this)}\r\n                    style={ styles.button }\r\n                >\r\n                    <Text style={ styles.textButton }>REGISTER</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        );\r\n        \r\n    }\r\n}\r\n\r\nexport default Login;\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        flexDirection: \"row\",\r\n        backgroundColor: '#fff',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n\r\n    rect: {\r\n        width: DEVICE_WIDTH-40,\r\n        height: 48,\r\n        borderWidth: 1,\r\n        borderColor: \"#000\",\r\n        borderRadius: 15,\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        marginTop: MARGIN_VIEW,\r\n        marginLeft: MARGIN_VIEW,\r\n        marginRight: MARGIN_VIEW,\r\n        padding: PADDING_CONTENT\r\n    },\r\n\r\n    textInput: {\r\n        color: \"#000\",\r\n        width: DEVICE_WIDTH-40,\r\n        height: 48,\r\n        fontSize: TEXTSIZE,\r\n    },\r\n\r\n    textButton: {\r\n        color: \"#000\",\r\n        fontSize: TEXTSIZE\r\n    },\r\n\r\n    button: {\r\n        width: DEVICE_WIDTH - 40,\r\n        height: 48,\r\n        borderWidth: 1,\r\n        borderColor: \"rgba(255,255,255,1)\",\r\n        borderRadius: 15,\r\n        backgroundColor: \"#ffd11a\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        alignContent: \"center\",\r\n        marginTop: MARGIN_VIEW,\r\n        marginLeft: MARGIN_VIEW,\r\n        marginRight: MARGIN_VIEW,\r\n        padding: PADDING_CONTENT\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}